import requests
import json
import requests
import json
import firebase_admin
from firebase_admin import auth
import requests
import json
import firebase_admin
from firebase_admin import auth
import datetime
from firebase_admin import credentials



def init_firebase():
    cred = credentials.Certificate('yallanow12-firebase-adminsdk-njuxe-db0348de3f.json')
    firebase_admin.initialize_app(cred)
init_firebase()

# url = 'http://localhost:5001/auth'
# token = "eyJhbGciOiJSUzI1NiIsImtpZCI6ImViYzIwNzkzNTQ1NzExODNkNzFjZWJlZDI5YzU1YmVmMjdhZDJjY2IiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20veWFsbGFub3cxMiIsImF1ZCI6InlhbGxhbm93MTIiLCJhdXRoX3RpbWUiOjE3MTEyNjkzMzAsInVzZXJfaWQiOiJ1U1lsQXZJN2VYVXVod1ZCRGJwNXZVS2tUdWgyIiwic3ViIjoidVNZbEF2STdlWFV1aHdWQkRicDV2VUtrVHVoMiIsImlhdCI6MTcxMTI2OTMzMCwiZXhwIjoxNzExMjcyOTMwLCJlbWFpbCI6InlvdXNzZWYubWFtb3VuMDNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInlvdXNzZWYubWFtb3VuMDNAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.jwqrOZAEpz_unFYwtVx-9LgpUJdNu6W1wTj4R6BVzqkkMAF6Nox_L2RouIVRGrkUCy5RWv-7eWPG-3x6eW9RAtC4iHjSvaBSPlj3JKprTb_re3TBUIHmZ0MJz6HZFQjgK4QvpWSzTgaPapC8ovApHNP2HDgEbSzR9zFFVm-70AC2sgTZ9eaNMZznDDm-3H4Kl5aQ63OYnuOKD-0THhcfNxuq5wDOkmcvkcwNfuzIal8KQQlOpVfaosltP9gdqnbqhAOWQfpYWiwtTi-nAm2RdTOeMFD_IwjYQu49Yf8ObAXdXv2wTIT2U8pxUIbS0HsYT7UiP2xpprc3J3xmPXjvgQ"
# data = {'id_token': token}
# response = requests.post(url, json=data)

# print(response.json())




# url = 'http://127.0.0.1:8080/api/test'
# token = "eyJhbGciOiJSUzI1NiIsImtpZCI6ImViYzIwNzkzNTQ1NzExODNkNzFjZWJlZDI5YzU1YmVmMjdhZDJjY2IiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20veWFsbGFub3cxMiIsImF1ZCI6InlhbGxhbm93MTIiLCJhdXRoX3RpbWUiOjE3MTEyNjkzMzAsInVzZXJfaWQiOiJ1U1lsQXZJN2VYVXVod1ZCRGJwNXZVS2tUdWgyIiwic3ViIjoidVNZbEF2STdlWFV1aHdWQkRicDV2VUtrVHVoMiIsImlhdCI6MTcxMTI2OTMzMCwiZXhwIjoxNzExMjcyOTMwLCJlbWFpbCI6InlvdXNzZWYubWFtb3VuMDNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbInlvdXNzZWYubWFtb3VuMDNAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoicGFzc3dvcmQifX0.jwqrOZAEpz_unFYwtVx-9LgpUJdNu6W1wTj4R6BVzqkkMAF6Nox_L2RouIVRGrkUCy5RWv-7eWPG-3x6eW9RAtC4iHjSvaBSPlj3JKprTb_re3TBUIHmZ0MJz6HZFQjgK4QvpWSzTgaPapC8ovApHNP2HDgEbSzR9zFFVm-70AC2sgTZ9eaNMZznDDm-3H4Kl5aQ63OYnuOKD-0THhcfNxuq5wDOkmcvkcwNfuzIal8KQQlOpVfaosltP9gdqnbqhAOWQfpYWiwtTi-nAm2RdTOeMFD_IwjYQu49Yf8ObAXdXv2wTIT2U8pxUIbS0HsYT7UiP2xpprc3J3xmPXjvgQ"
# data = {'id_token': token}
# response = requests.post(url, json=data)

# print(response.text)

# Get the Firebase session cookie
token = "eyJhbGciOiJSUzI1NiIsImtpZCI6ImJhNjI1OTZmNTJmNTJlZDQ0MDQ5Mzk2YmU3ZGYzNGQyYzY0ZjQ1M2UiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWW91c3NlZiBIYXNzYW4iLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EvQUNnOG9jTHhLSkpTcko5d0thOEg4anNoUkpGSnVKdmlYcS1LN2d3VmhwWng3RENyPXM5Ni1jIiwiaXNzIjoiaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tL3lhbGxhbm93MTIiLCJhdWQiOiJ5YWxsYW5vdzEyIiwiYXV0aF90aW1lIjoxNzExNTc2ODgyLCJ1c2VyX2lkIjoidVNZbEF2STdlWFV1aHdWQkRicDV2VUtrVHVoMiIsInN1YiI6InVTWWxBdkk3ZVhVdWh3VkJEYnA1dlVLa1R1aDIiLCJpYXQiOjE3MTE1NzY4ODIsImV4cCI6MTcxMTU4MDQ4MiwiZW1haWwiOiJ5b3Vzc2VmLm1hbW91bjAzQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7Imdvb2dsZS5jb20iOlsiMTAwNTAxNjIzODg4NzA1NzYwNzc0Il0sImVtYWlsIjpbInlvdXNzZWYubWFtb3VuMDNAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.Zu6JI-YZKD_vCp4ZRXD7boMDsDFU5lmFCnGx97AitPEFE6r98son3M3QpZylTJnV5PQLiFgbSS8KHLRBIOd0lXJcPrd3dUFvSyx5UZM4q_u1tM8vlcYw89LWNfWw5Q7gDxcEFsvCkpHbyz34cgPROXGRQK1j-EcbJYJHrCSZb2k-SIrLjIGR7WtXvl6RvIw5mXM4CZhU_AgILqvnD9ja6zXqrlCiT-h2G2y2KbYRWr11YyTF1e_gIzpz8FD57OxTGpIPq9VHXsc9i9pcusK3tPRgRkY_f702l4mWK-UMmgixJiYO6iFS7hb7oGgOdMDH-iECXTYbv2N7lMkeDHdkOg"



# Set the cookie in the request headers
headers = {'authorization': token}

url = 'http://localhost:5002/auth'
response = requests.post(url, headers=headers)

print(response.text)

